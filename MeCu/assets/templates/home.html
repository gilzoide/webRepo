<div ng-controller='UserInfoController' class='container'>
	<!-- Infos de usuário -->
	<div class='page-header row'>
		<!-- Informações de usuário -->
		<div class='col-md-1'>
			<img class='img-responsive center-block' src='{{ user.foto }}' alt='Foto do usuário'>
		</div>
		<div class='col-md-6'>
			<h1>{{ user.nome }} <small>{{ user.apelido }}</small></h1>
		</div>

		<!-- Botões de controle -->
		<div class='btn-group col-md-4 col-md-offset-1' ng-controller='HeaderButtonController' role="group" aria-label="...">
			<button class='btn btn-default'><span class='glyphicon glyphicon-home'></span></button>
			<button class='btn btn-default' ng-click='configura ()'><span class='glyphicon glyphicon-cog'></span> Configurações </button>
			<button class='btn btn-default' ng-click='logout ()'><span class='glyphicon glyphicon-off'></span></button>
		</div>
		<div class='col-md-12'>
			{{ user.descricao }}
		</div>
	</div>

	<!-- Posts -->
	<div ng-controller='PostController'>
		<!-- input do novo post -->
		<div class='input-group'>
			<input class='form-control' ng-model='newPost' placeholder="Conte-nos algo">
			<span class='input-group-btn'>
				<button class='btn btn-default' ng-click='createPost (newPost)'><span class='glyphicon glyphicon-ok'></span></button>
				<button class='btn btn-default' ng-click='marcaEditar (!podeEditar)'><span class='glyphicon glyphicon-pencil'></span></button>
				<button class='btn btn-danger' ng-click='marcaMorte (!podeApagar)'><span class='glyphicon glyphicon-remove'></span></button>
			</span>
		</div>
		<!-- erro -->
		<div class='alert alert-danger alert-dismissible' ng-show='error'>
			{{ error }}
		</div>
		<!-- sucesso -->
		<div class='alert alert-success alert-dismissible' ng-show='success'>
			{{ success }}
		</div>
		<!-- printa posts, ao contrário (mais novo mais acima) -->
		<div class='row flex-row'>
			<div ng-repeat='post in allPosts | reverse'>
				<!-- botão de apagar, só se puder apagar -->
				<button class='btn btn-danger btn-sm' ng-click='mataPost (post.id, $index)' ng-show='podeApagar'><span class='glyphicon glyphicon-remove'></span></button>

				<div class='panel panel-default container'>
					<!-- botão de salvar edição, só se puder editar -->
					<button class='btn btn-default' ng-click='atualizaPost (post)' ng-show='podeEditar'><span class='glyphicon glyphicon-ok'></span></button>
					<input type='text' ng-model='post.conteudo' ng-show='podeEditar'>
					<!-- readonly -->
					<span ng-hide='podeEditar'>
						<span class='text-right'>{{ post.createdAt }}</span>
						<blockquote>
							{{ post.conteudo }}
						</blockquote>
					</span>
				</div>
			</div>
		</div>
	</div>
</div>
